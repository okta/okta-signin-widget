define([
  'underscore',
  'shared/util/TemplateUtil',
  'shared/views/forms/BaseInput'
],
  function (_, TemplateUtil, BaseInput) {

    var template = TemplateUtil.tpl('<a class="advanced-link float-r" href="#">{{linkText}}</a>');
    var showText = 'Show Advanced Settings';
    var hideText = 'Hide Advanced Settings';

    return BaseInput.extend({

      events: {
        'click a': 'update'
      },

      update: function (e) {
        e && e.preventDefault();
        // We toggle the true/false value every time the link is clicked
        this.model.set(this.options.name, !this.model.get(this.options.name));
        this.render();
      },

      editMode: function () {
        var linkText = showText;
        if (this.model.get(this.options.name)) {
          linkText = hideText;
        }

        var options = _.extend({
          linkText: linkText
        }, this.options);
        this.$el.html(template(options));
        return this;
      },

      val: function () {
        return this.model.get(this.options.name);
      },

      focus: function () {
        return this.$('a').focus();
      }
    });

  });
