define([
  'underscore',
  'shared/views/BaseView',
  './MappingsHeader',
  './PreviewMappingRow'
], function (_, BaseView, MappingsHeader, PreviewMappingRow) {

  return BaseView.extend({
    id: 'preview-mapping-list',

    className : 'preview-mapping-list data-list clearfix',

    template: '\
      <div class="data-list-content-wrap">\
        <table class="data-list-table o-form"></table>\
      </div>\
    ',

    initialize: function () {
      this.add(MappingsHeader, '.data-list-table');

      var self = this;
      _.each(this.model.get('propertyMappings'), function (mapping) {
        self.add(PreviewMappingRow, {
          selector: 'table',
          options: {
            mappingData: mapping
          }
        });
      });
    }
  });
});
