define([
  'shared/views/BaseView',
  './SaveMapping',
  './ApplyMapping'
], function (BaseView, SaveMapping, ApplyMapping) {

  return BaseView.extend({
    className: 'data-list-pager-footer modal-fullpage-button-bar button-bar button-bar-border-top clearfix',

    stateEvents: {
      'askapply:mapping': '_switchToApply'
    },

    initialize: function () {
      this.saveMapping = this.add(SaveMapping, {options: {previewModel: this.options.previewModel}}).last();
    },

    _switchToApply: function (options) {
      this.saveMapping && this.saveMapping.remove();
      this.add(ApplyMapping, {options: {displayOptions: options}});
    }
  });
});
