define([
  'underscore',
  'shared/views/BaseView',
  './Tab'
], function (_, BaseView, Tab) {

  return BaseView.extend({

    className: 'o-form-toolbar ui-tabs ui-widget ui-widget-content ui-corner-all clearfix',

    template: '\
      <ul id="mapping-direction" class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header \
        ui-corner-all o-form-pillbar"></ul>\
    ',

    events: {
      'click #mapping-direction a': function (e) {
        e.preventDefault();
        // We are looking at the event 'currentTarget', as opposed to 'target' due to the anchor tag
        // containing a span item which could be clicked, hence preventing the anchor tag event
        // from firing
        this.state.set('tabId', e.currentTarget.id);
      }
    },

    initialize: function () {
      this.tabList = this.options.tabs;
      var self = this;
      _.each(this.tabList, function (tab) {
        self._addTab({id: tab.id, disp: tab.disp, link: tab.link, selected: tab.selected});
      });
    },

    _addTab: function (options) {
      var tab = new Tab(_.extend(options, {state: this.state}));
      this.add(tab, 'ul');
    }

  });
});
