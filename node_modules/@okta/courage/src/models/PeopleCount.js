define(['shared/models/BaseModel'], function (BaseModel) {

  return BaseModel.extend({
    defaults: {
      count: null
    },

    constructor: function (attrs, options) {
      this.filter = options.filter;
      this.skipFetch = options.skipFetch;
      delete options.filter;
      delete options.skipFetch;
      BaseModel.apply(this, arguments);
    },

    fetch: function () {
      // OKTA-21134: Some filters do not yield an accurate count - instead of fetching it, show a dash instead.
      if (this.skipFetch) {
        this.set('count', '&ndash;');
        this.trigger('sync');
      } else {
        return BaseModel.prototype.fetch.call(this, {data: {filter: this.filter.name}});
      }
    },

    getFilter: function () {
      return this.filter;
    },

    url: '/api/internal/people/count'
  });

});