/**
 * Created by wenquanzhou on 12/17/15.
 */
define([
  'underscore',
  'shared/models/Model'
], function (_, Model) {

  // TODO: consolidate this with AFWUnified.js OKTA-85732
  return Model.extend({
    idAttribute: 'enterpriseId',
    props: {
      'enterpriseId': 'string',
      'token': 'string',
      'primaryDomain': 'string',
      'googleAppInstanceId': 'string',
      'enrolledDeviceCount': 'number',
      'deactiveAppsCount': 'number'
    },
    local: {
      'signOnMode': { // sign on mode for the associated Google app instance
        type: 'string',
        values: ['SAML_2_0', 'BROWSER_PLUGIN']
      },
      'afwOnly': 'boolean'
    },
    urlRoot: '/api/internal/v1/afw/enrollment',
    sync: function (method, model, options) {
      if (method === 'create') {
        _.each(model.attributes, function (val, key) {
          if (_.isUndefined(val) || _.isNull(val)) {
            model.unset(key, {silent: true});
          }
        });
      }
      return Model.prototype.sync.call(this, method, model, options);
    }
  });
});