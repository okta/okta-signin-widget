define([
  'shared/models/BaseModel',
  'shared/models/BaseCollection',
  'shared/util/URLs'
], function (BaseModel, BaseCollection, URLs) {

  var AppInstance = BaseModel.extend({
    defaults: {
      id: undefined,
      name: undefined,
      label: undefined,
      status: undefined,
      lastUpdated: undefined,
      created: undefined,
      logoHref: undefined,
      '__logoUrl__': BaseModel.ComputedProperty(['logoHref'], function (href) {
        return href || URLs.APP_DEFAULT_LOGO_RESOURCE;
      }),
      '__configUrl__': BaseModel.ComputedProperty(['id', 'name'], function (id, name) {
        return URLs.getAppConfigResource(name, id);
      })
    },

    parse: function (resp) {
      var appInstance = resp._embedded.app;
      appInstance.logoHref = resp._embedded.appLogo.href;
      resp = appInstance;
      return resp;
    }
  });

  var AppInstances = BaseCollection.extend({

    model: AppInstance,

    url: '/api/v1/apps/user/types?expand=app,appLogo'
  });

  return {
    // app instances that have obj types
    Model: AppInstance,
    Collection: AppInstances
  };
});
